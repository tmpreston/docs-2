



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for Saturn Framework">
      
      
      
        <meta name="author" content="Krzysztof Cieslak">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.6.1">
    
    
      
        <title>Routing - Saturn Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.a315b664.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#routing" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Saturn Docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Saturn Docs
              </span>
              <span class="md-header-nav__topic">
                Routing
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/SaturnFramework/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      SaturnFramework/docs
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    Saturn Docs
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/SaturnFramework/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      SaturnFramework/docs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../how-to-start/" title="How to start in 60 seconds" class="md-nav__link">
      How to start in 60 seconds
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../directory-structure/" title="Directory Structure" class="md-nav__link">
      Directory Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../adding-pages/" title="Adding Pages" class="md-nav__link">
      Adding Pages
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Routing
      </label>
    
    <a href="./" title="Routing" class="md-nav__link md-nav__link--active">
      Routing
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#best-practices" title="Best Practices" class="md-nav__link">
    Best Practices
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#format-strings" title="Format Strings" class="md-nav__link">
    Format Strings
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../controller/" title="Controller" class="md-nav__link">
      Controller
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scaffolding/" title="Scaffolding" class="md-nav__link">
      Scaffolding
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Api Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Api Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/pipeline/" title="Pipeline" class="md-nav__link">
      Pipeline
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/router/" title="Router" class="md-nav__link">
      Router
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/controller/" title="Controller" class="md-nav__link">
      Controller
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/application/" title="Application" class="md-nav__link">
      Application
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#best-practices" title="Best Practices" class="md-nav__link">
    Best Practices
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#format-strings" title="Format Strings" class="md-nav__link">
    Format Strings
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/SaturnFramework/docs/edit/master/docs/guides/routing.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="routing">Routing</h1>
<p>Routes are how Saturn connect all the HTTP requests to the different actions. Think of route as the URL of the application. The site is yoursite.com but you may have an route for your about page such as yoursite.com/about.</p>
<p>In Saturn, <code>Routers</code> contain all the routes of your application. Router is a list of routes. A website can have a router that handles the different routes to your page like so:</p>
<pre><code>yoursite.com
    ├── "/"             -yoursite.com/
    ├── "/about"        -yoursite.com/about
    ├── "/contact"      -yoursite.com/contact
    ├── "/news"         -yoursite.com/news
    └── "/investors"    -yoursite.com/investors
</code></pre>
<p>Since this is at the root, this is your router at <code>""</code> path. You can then add a router inside another router to have the following:</p>
<pre><code>yoursite.com
    ├── books           -yoursite.com/books
    |   ├── list        -yoursite.com/books/list
    |   ├── add         -yoursite.com/books/add
    |   ├── update      -yoursite.com/books/update
    |   └── delete      -yoursite.com/books/update
    ├── about           -yoursite.com/about
    ├── contact         -yoursite.com/contact
    ├── news            -yoursite.com/news
    └── investors       -yoursite.com/investors
</code></pre>
<p>Now you have router for the <code>"/books"</code> path inside another router for the <code>""</code> path.</p>
<p>Now to see it in code, create a Saturn project from the template and you will have a <code>Router.fs</code> file like this:</p>
<pre><code class="fsharp">module Router

open Saturn
open Giraffe.Core
open Giraffe.ResponseWriters


let browser = pipeline {
    plug acceptHtml
    plug putSecureBrowserHeaders
    plug fetchSession
    set_header &quot;x-pipeline-type&quot; &quot;Browser&quot;
}

let defaultView = router {
    get &quot;/&quot; (htmlView Index.layout)
    get &quot;/index.html&quot; (redirectTo false &quot;/&quot;)
    get &quot;/default.html&quot; (redirectTo false &quot;/&quot;)
}

let browserRouter = router {
    not_found_handler (htmlView NotFound.layout) //Use the default 404 webpage
    pipe_through browser //Use the default browser pipeline

    forward &quot;&quot; defaultView //Use the default view
}

//Other scopes may use different pipelines and error handlers

// let api = pipeline {
//     plug acceptJson
//     set_header &quot;x-pipeline-type&quot; &quot;Api&quot;
// }

// let apiRouter = router {
//     not_found_handler (setStatusCode 404 &gt;=&gt; text &quot;Api 404&quot;)
//     pipe_through api
//
//     forward &quot;/someApi&quot; someScopeOrController
// }

let appRouter = router {
    // forward &quot;/api&quot; apiRouter
    forward &quot;&quot; browserRouter
}
</code></pre>

<p>First, take a look at the <code>router</code> function.</p>
<pre><code class="fsharp">let appRouter = router {
    forward &quot;&quot; browserRouter
}
</code></pre>

<p>The <code>appRouter</code> function is a <code>router</code>. Inside is the <code>forward "" defaultView</code> line. The <code>forward</code> function need a path and a router. In this case, the path is an empty string and the router is <code>browserRouter</code>. That means that the <code>browserRouter</code> router will handles the routes at the current location. Since, <code>appRouter</code> is the first router called, the current location is the root of the application.</p>
<p>Now let's look at <code>browserRouter</code>:</p>
<pre><code class="fsharp">let browserRouter = router {
    not_found_handler (htmlView NotFound.layout)
    pipe_through browser

    forward &quot;&quot; defaultView
}
</code></pre>

<p>There are three lines. The first line, <code>not_found_handler (htmlView NotFound.layout)</code> tells browserRouter to displays a not found page if the user enter a route that the application does not handles. The second line tell the application to use the <code>browser</code> pipeline defined above. The pipeline is a list of settings on how the website will deliver the pages. Lastly, <code>forward "" defaultView</code> is like <code>forward "" defaultView</code> from the <code>appRouter</code>. Again, <code>browserRouter</code> does not contain any routes but it told the <code>defaultView</code> router to handle them. Finally, we get to the part where the application is told how to handle the routes. Inside <code>defaultView</code>, we created 3 routes.</p>
<pre><code class="fsharp">let defaultView = router {
    get &quot;/&quot; (htmlView Index.layout)
    get &quot;/index.html&quot; (redirectTo false &quot;/&quot;)
    get &quot;/default.html&quot; (redirectTo false &quot;/&quot;)
}
</code></pre>

<p>Here, we see that <code>get</code> is used to define the routes. There are 3 routes here but 2 that redirect to the first route. To illustrate, the routes are:</p>
<pre><code>yoursite.com
    └── "" (router)
        └── "" (browserRouter)
            └── "" (defaultView)
                ├── "/"                 -yoursite.com/
                ├── "/index.html"       -redirect to yoursite.com/
                └── "/default.html"     -redirect to yoursite.com/
</code></pre>
<p>Looking at the first line inside <code>defaultView</code>, <code>get "/" (htmlView Index.layout)</code> tells the application to displays <code>Index.layout</code> at the root of the application. The <code>get</code> correspond to the HTTP verb GET so when you type in a link, the browser try to GET the page. The first parameter of <code>get</code> is "/" so basicly when getting the root, the get function will return something. The second parameter is <code>(htmlView Index.layout)</code> so the <code>get</code> function return a html page specified by Index.layout. The second and third line have <code>(redirectTo false "/")</code>, tell the application to go to "yoursite.com/" when going to "yoursite.com/index" or "yoursite.com/default"</p>
<h2 id="best-practices">Best Practices</h2>
<p>You can combine all 3 routers into one router like so:</p>
<pre><code class="fsharp">let appRouter = router {
    not_found_handler (htmlView NotFound.layout)
    pipe_through browser

    get &quot;/&quot; (htmlView Index.layout)
    get &quot;/index.html&quot; (redirectTo false &quot;/&quot;)
    get &quot;/default.html&quot; (redirectTo false &quot;/&quot;)
}
</code></pre>

<p>The template splits them into 3 to encourages good practices. In the first router, you can see the commented out code <code>forward "/api" apiRouter</code>. This is a good suggestin in the template to have a separate router to handle your api routes. We set up how to deliever the webpage with <code>pipe_through browser</code> in <code>browserRouter</code>. The setting are important for a browser to know how to handle your routes but not for a different applications to access your routes as an api.</p>
<p>The template provided an example of how to set up the api routes in the commented out code, which I copied below:</p>
<pre><code class="fsharp">let api = pipeline {
    plug acceptJson
    set_header &quot;x-pipeline-type&quot; &quot;Api&quot;
}

let apiRouter = router {
    not_found_handler (setStatusCode 404 &gt;=&gt; text &quot;Api 404&quot;)
    pipe_through api

    forward &quot;/someApi&quot; someScopeOrController
}

</code></pre>

<p>Here we have the <code>apiRouter</code> router which does not return a 404 page but a 404 text instead which is appropriate for an api. The router also use a pipeline that is more appropriate for an api such as accepting JSON inputs instead of HTML as in the <code>browser</code> pipeline.</p>
<h2 id="format-strings">Format Strings</h2>
<p>You might be wondering how to make a routes that accept a numerical id. You can make multiple routes for each id like so</p>
<pre><code>get "/1" (getApplication 1)
get "/2" (getApplication 2)
get "/3" (getApplication 3)
...
</code></pre>
<p>But this is impracticle because there can be a large amount of items or new items are constantly being created with new ids. Instead the solution is to use format strings. Remember that in the <a href="../adding-pages/">Adding Pages Guide</a>, we used <code>getf "/%s" index2Action</code> to pass a string to page.</p>
<table>
<thead>
<tr>
<th>Format Char</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%b</code></td>
<td><code>bool</code></td>
</tr>
<tr>
<td><code>%c</code></td>
<td><code>char</code></td>
</tr>
<tr>
<td><code>%s</code></td>
<td><code>string</code></td>
</tr>
<tr>
<td><code>%i</code></td>
<td><code>int</code></td>
</tr>
<tr>
<td><code>%d</code></td>
<td><code>int64</code></td>
</tr>
<tr>
<td><code>%f</code></td>
<td><code>float</code>/<code>double</code></td>
</tr>
<tr>
<td><code>%O</code></td>
<td><code>Guid</code></td>
</tr>
</tbody>
</table>
<p>For a numerical id, we want to pass an int which is <code>%i</code> in the list above so you can replace the lines aboves with</p>
<pre><code class="fsharp">getf &quot;/%i&quot; getApplication
</code></pre>

<p>Notice that <code>getf</code> is used instead of get. This is a separate version of get that handle <code>f</code>ormat characters.</p>
<pre><code>You can use format strings with "forward" too by using "forwardf"
</code></pre>
<p>There are a lot of functionalities within routers and you can view all of them <a href="../../api/router">here</a>.</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        

<!-- Application footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">

        <!-- Link to previous page -->
        
          <a href="../adding-pages/"
              title="Adding Pages"
              class="md-flex md-footer-nav__link md-footer-nav__link--prev"
              rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back
                    md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch
                  md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Adding Pages
              </span>
            </div>
          </a>
        

        <!-- Link to next page -->
        
          <a href="../controller/" title="Controller"
              class="md-flex md-footer-nav__link md-footer-nav__link--next"
              rel="next">
            <div class="md-flex__cell md-flex__cell--stretch
                  md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Controller
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward
                    md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">

      <!-- Copyright and theme information -->
      <div class="md-footer-copyright">
        Powered by <a href="http://www.mkdocs.org">MkDocs</a>
        | Supported by
        <a href="http://lambdafactory.io">
            λFactory</a>
      </div>

      <!-- Social links -->
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/SaturnFramework" class="md-footer-social__link fa fa-github"></a>
    
      <a href="http://lambdafactory.io" class="md-footer-social__link fa fa-globe"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.9fb73e57.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>